#!/usr/bin/env groovy
podTemplate {
	node(POD_LABEL) {
		stage('Clone repository') {
			checkout scm
		}
	}
}

podTemplate(containers: [
	containerTemplate(name: 'dind', image: 'docker:dind', privileged: true)
]) {
	node(POD_LABEL) {
		container('dind') {
			stage('Build') {
				image = docker.build("link2coryACR.azurecr.io/fastapi_hello_world:${env.BUILD_ID}")
			}
		}
	}

}
